<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>OpenCV: Basics - DCPrime's Blog </title>
  <meta name="viewport" content="width=device-width">
  <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css" media="screen">
        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-47877573-1']);
          _gaq.push(['_trackPageview']);
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>
</head>
<body>
      <div class="site">
        <div class="headbar">
          <h1><div class="dark">DCPrime's</div><div class="light">Blog</div></h1>
          <div class="navbar">
            <a href="/">Blog</a>
            <a class="extra" href="/about.html">About</a>
            <!--<a class="extra" href="/draft.html">Drafts</a>
            <a class="extra" href="/review.html">Reviews</a>	-->
            <br />
          </div>
        </div>
        <!--    <div class="header">
        <h1 class="tfitle"><a href="/">DCPrime's Blog</a></h1>
        <a class="extra" href="/">Home</a>
        </div>-->

        <h2>OpenCV: Basics</h2>
<div class="meta">
Published on 23 Aug 2013
</div><br>
<div class="post">
<p>OpenCV as you all know is an open-source Computer Vision library for C, C++ and also Python. This post will guide you for how to use and how to implement any problem on OpenCV. First of all an apology for not writing any post till now. From last week I am thinking about the topic to write for the blog and I came up with this. Choose any one from the given two Integrated Development Environments(IDEs) its needed for developing a project then even executable file at the end and it also helps a lot in debugging.</p>

<h2><a href="http://www.eclipse.org" target="_blank">Eclipse IDE</a>:</h2>

<p>As we are dealing with C and C++  we need an environment for developing the program so we use Eclipse (here). Precisely Eclipse&#39;s CDT plugin. You need to download it from <a href="http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers-includes-incubating-components/indigosr2">here</a>. Its around 100 MBs.</p>

<h2><a href="http://www.microsoft.com/visualstudio" target="_blank">Visual Studio</a>:</h2>

<p>For detailed instructions on configuring OpenCV on Visual Studio and Eclipse Please visit <a href="http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html" target="_tab">OpenCV on VS</a> and <a href="http://docs.opencv.org/doc/tutorials/introduction/linux_eclipse/linux_eclipse.html" target="_tab">OpenCV on Eclipse</a> respectively.</p>

<h2>Basics:</h2>

<p>Basics of OpenCV also starts with reading an image and showing it in a window. Well its not as simple as it was in Matlab. So before reading an image lets start with the basic structure of OpenCV C language program.</p>

<pre><code>#include "stdafx.h" //if you are using Visual Studio
#include &lt;cv.h&gt;
int main()
{
declaration of variables;
\...
program;
\...
return 0;
}</code></pre>

<p><b>For C++:</b></p>

<pre><code>#include &lt;cv.h&gt;using namespace cv;int main()
{
\...
return 0;
}</code></pre>

<p><b>For Python:</b></p>

<pre><code>from cv2.cv import *
\...
\...</code></pre>

<p>The function in OpenCV header file <code>cv.h</code> for reading an image is <code>cvLoadImage()</code> in C and <code>imread()</code> in C++. From that you may get an idea C++ is better to code in rather than C (later you will think its better to code in Python<a title="For those who already know how to code in Python">*</a> rather than C++) Following is the code for reading an image and displaying on a window named &quot;Display&quot;</p>

<pre><code>#include&lt;cv.h&gt;
#include&lt;highgui.h&gt;
int main()
{
IplImage* img1 = cvLoadImage("C:\image\path", CV_LOAD_IMAGE_COLOR);
    cvNamedWindow("Display", CV_WINDOW_AUTOSIZE);
    cvShowImage("Display",img1);
    cvWaitKey(0);
    cvReleaseImage(&amp;img1);
    return 0;
}</code></pre>

<h2>Explanation</h2>

<p>Starting from the beginning &quot;The Header Files&quot;</p>

<ul>
    <li><code>cv.h</code> contains all the necessary functions like reading an image filtering creating shapes, etc.</li>
    <li>Header file <code>highgui.h</code> on the other hand contains functions for Graphical User Interfaces like showing image in window having adjustment bars, etc.</li>
</ul>

<p>Now &quot;The Code&quot;</p>

<ul>
    <li>The first part like <code>int main()</code> <a title="I often wonder why the write int as return type when they don't want to return anything">*</a> which says main function starts now.</li>
    <li>Next is quite difficult to understand its the structure that is used to store images i.e. <code> IplImage* img1 </code> assigns the starting address of memory to <code>img1</code>.</li>
    <li><code>img1 = cvLoadImage("Path to Image",CV_LOAD_IMAGE_COLOR)</code> stores the image defined in path to address pointed by img1 and the macro <code>CV_LOAD_IMAGE_COLOR</code> is for specifying that the fetched image should be in form of "color" not "gray-scaled" if we write GRAYSCALE in place of COLOR it will read/load image in form of gray-scaled image.</li>
    <li>Now we use <code>highgui.h</code> for creating a window for showing the image using <code>cvNamedWindow("WindowName",size)</code> here again macro has been used named <code>CV_WIDOW_AUTOSIZE</code> which resizes the window with its content.</li>
    <li>Now as we defined the window we need to add the content in it using the function <code>cvShowImage("WindowName",image-var)</code></li>
    <li>That's it the image will be displayed now to hold it to view and not to just 'return 0' and exit we need to add one more line as <code>cvWaitKey(time)</code> this will wait.</li>
    <li>We know that we need to clear the memory been used by image variable so we use <code>cvReleaseImage()</code> function to release the image memory.</li>
</ul>

<p>Well that ended the C part now almost the same remains in both C++ and Python. The codes are given with comments in the and they are self-explanatory .</p>

<h2>For C++:</h2>

<pre><code>#include &lt;cv.h&gt;
#include &lt;highgui.h&gt;
using namespace cv;
int main()
{
    Mat image;  //Image is in form of matrix (here)
    image = imread("/home/darshil/images/hello.jpg", 1 );
    if(!image.data ) //Check if image has data
    {
        printf( "No image data \n" );
        return -1;
    }
    namedWindow( "Display Image", CV_WINDOW_AUTOSIZE );
    imshow( "Display Image", image );
    waitKey(0);
    return 0;
}
</code></pre>

<h2>For Python:</h2>

<pre><code>from cv2.cv import * # importing the opencv module
img=LoadImageM("path/to/image.jpg") # loading image in form of matrix 
NamedWindow("Display",CV_WINDOW_AUTOSIZE) # Creating a window
ShowImage("Display",img)  #Displaying the image
WaitKey(0) #waitkey to wait till the output comes
</code></pre>

<p>This is it.</p>

<p>End of Post.</p>

</div>

<div class="sharebuttons">
<!-- Twitter -->
<div style="float:right">
<a href="https://twitter.com/share" class="twitter-share-button" data-via="dtchanpura" data-hashtags="DCprime">Tweet</a>
<script>
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
</script>
</div>
<!-- Facebook<div class="fb-share-button" data-type="button_count" data-annotation=inline></div>
-->

<!-- Google Plus -->
<div style="float:left;">
	<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>
	<div class="g-plusone" data-size="medium" data-annotation="bubble"></div>
</div><br>
</div>

        <div class="footer">
          <div class="flip-container" ontouchstart="this.classList.toggle('hover');">
            <div class="flipper">
              <div class="front">
                <div class="contact">
                  <center width=200px>Darshil Chanpura<br />Developer:Designer<br />dcprime314@gmail.com<!--</center>-->
                </div>
              </div>
              <div class="back">
                <div class="contact" id="icons">
                  <center width=200px>
                    <a href="mailto:dcprime314@gmail.com"><img src="/logo/gmail-512.png" width=48 alt="Mail to dtchanpura" /></a>
                    <a href="https://github.com/dtchanpura"><img src="/logo/github.png" width=48 alt="Github @dtchanpura" /></a>
                    <a href="http://google.com/+DarshilChanpura"><img src="/logo/google.png" width=48 alt="Google +Darshil Chanpura" /></a><br />
                    <a href="https://twitter.com/dtchanpura"><img src="/logo/twitterICO.png" width=48 alt="Follow @dtchanpura" /></a>
                    <a href="http://facebook.com/dtchanpura"><img src="/logo/facebook.png" width=48 alt="Facebook/dtchanpura" /></a>
                    <a href="irc://irc.freenode.net/dcprime"><img src="/logo/irclogo.png" width=48 alt="IRC #dcprime"/></a>
                  </center>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
